<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>

<head>
<meta http-equiv="Content-Type"
content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPage 2.0">
<title>Reactive Behavior Modeling in Haskell</title>
</head>

<body>

<h1 align="center"><b>RBMH Release 0.7</b> </h1>

<h2 align="center">Reactive Behavior Modeling in Haskell </h2>

<h2 align="center"><a
href="http://www.research.microsoft.com/research/graphics/elliott/">Conal
Elliott</a></h2>

<p align="center">&nbsp; <em>Last modified <!--webbot
bot="TimeStamp" startspan s-type="EDITED" s-format="%B %d, %Y" -->October 25, 1996<!--webbot
bot="TimeStamp" i-checksum="31577" endspan --></em></p>

<p>RBMH is a Haskell library (or &quot;embedded language&quot;)
for simple 2D animation. It runs on <a
href="http://haskell.systemsz.cs.yale.edu/hugs/">Hugs</a> under
Windows 95 and Windows NT, using Win32 graphics (GDI). </p>

<p>Try it, it's fun! Please let me know how it goes.</p>

<p>See <a href="news.htm">news</a> for details on changes from
one version to another.</p>

<h3>Directions</h3>

<ol>
    <li>Download <a href="http:rbmh0.6.zip"><strong>rbmh0.7.zip</strong></a></li>
    <li>Unzip to create a directory tree called <strong>rbmh</strong>,
        with subdirectories <strong>Lib</strong>, <strong>Media</strong> and <strong>src</strong>. </li>
    <li>Start up Hugs (tested with Yale Release 0), and <strong>:cd</strong>
        to <strong>rbmh\src</strong>. You'll end up in the module
        called <strong>ImageBTest</strong>, which contains simple
        test cases. </li>
    <li>Type <strong>:p rbmh.prj</strong></li>
    <li>At the Hugs prompt, type <strong>disp &lt;name&gt;</strong>,
        where <strong>&lt;name&gt;</strong> is <strong>i1</strong>, <strong>i2</strong>,
        etc, as defined in <strong>ImageBTest.hs</strong>. Or you can
        just type <strong>disp allDemos</strong>. In the latter case,
        press the space key to go from one demo to the next.
        There are very sparse comments in the source. </li>
    <li>Try examples of your own. If you send me ones you've
        built, I'll consider them for inclusion (with credit to
        you) in future releases. </li>
</ol>

<h3>Notes</h3>

<ul>
    <li>As of version 0.7, alpha behaviors are represented as <strong>Time
        -&gt; (alpha, Behavior a)</strong>. This form allows incremental
        behavior evaluation without implicit state, in particular
        for <strong>untilB</strong> and <strong>integral</strong>
        behaviors. </li>
</ul>

<h3>Bugs</h3>

<ul>
    <li>Currently there is a space leak with recursive integrals
        (ODEs), so don't let <strong>i16</strong> and,
        especially, <strong>i17</strong>, run very long. If you
        see the update rate decreasing dramatically, move on to
        the next example before you blow Hugs's heap. Also, <strong>i23</strong>
        seems to exhibit a slow space leak.</li>
    <li>Button-up and key-up events are missed if they happen too
        soon after the down event. Be careful with <strong>i8,
        i9, i10, i11</strong> in <strong>ImageBTest.</strong> If
        an up-event goes unnoticed, do the <em>same</em> down
        event again, but this time hold for a bit and release.</li>
    <li>Transformation doesn't work on all primitives. In
        particular: bitmaps, and text don't rotate, and text
        doesn't even scale. <strong>SetWorldTransform</strong>
        might be a general fix, but from the documentation, it
        doesn't appear to work under Win95. </li>
    <li><strong>ImageBTest.iBlowStack</strong> blows the stack.
        In general, it seems that infinitely recursive image
        behaviors blow the stack, even with bounding boxes. I
        guess there's a subtlety about strictness that I don't
        grok yet.</li>
    <li>Text doesn't center. </li>
    <li>Examples <strong>i9</strong> and <strong>i10</strong>
        don't hear the button release if you do it too soon after
        the button press.</li>
    <li>Switch all <strong>ImageBTest</strong> examples to be
        functions of start time, to eliminate space leak (CAFs)
        and to make them temporally composable.</li>
</ul>

<h3>Future work</h3>

<ul>
    <li><a href="todo.htm">Small items</a></li>
    <li><a href="projects.htm">Non-trivial projects</a></li>
</ul>

<h3>&nbsp;Credits</h3>

<ul>
    <li>Greg Schechter, Ricky Yeung, Salim AbiEzzi, and I
        collaborated at Sun Microsystems on <a
        href="http://www.research.microsoft.com/research/graphics/elliott/tbag/index.htm">TBAG</a>,
        a system for constraint-based, semi-declarative modeling
        of 3D animation. Some of the RBMH ideas were initially
        explored there.</li>
    <li><a
        href="http://www.research.microsoft.com/research/graphics/knoblock/">Todd
        Knoblock</a> and Jim Kajiya helped to explore the basic
        ideas of behaviors and events.</li>
    <li><a href="http://www.dcs.gla.ac.uk/~sof">Sigbjorn Finne</a>
        helped a lot with the implementation during his summer
        '96 internship.</li>
    <li>Anthony Daniels has been pushing the limits of
        physics-oriented reactive behavior, uncovering some
        limitations in the implementation.</li>
    <li><a
        href="http://www.cs.yale.edu/HTML/YALE/CS/HyPlans/hudak-paul.html">Paul
        Hudak</a> has been collaborating on the ideas and, in
        particular, how to embed them in Haskell.</li>
    <li><a
        href="http://www.cs.yale.edu/HTML/YALE/CS/HyPlans/reid-alastair.html">Alastair
        Reid</a> answered lots of my naive questions about
        Haskell and its implementation, and provided some emergency
        Hugs hacking.</li>
    <li><a href="http://www.cs.yale.edu/homes/peterson-john.html">John
        Peterson</a> wrote another implementation that provided
        an interesting comparison. Many interesting discussions.</li>
    <li><a href="http://www.cs.yale.edu/users/ling/">Gary Shu
        Ling</a> found misc bugs and sources of incompletenesses.</li>
    <li><a href="http://www.dcs.gla.ac.uk/~simonpj/">Simon Peyton
        Jones</a> is helping me understand <a
        href="http://www.dcs.gla.ac.uk/fp/software/ghc/">GHC</a>
        (the Glasgow Haskell compiler) and how to use it effectively
        to compiler animation programs, as well as how to better
        implement RBMH.</li>
    <li><a href="http://www.cs.nott.ac.uk/Department/Staff/mpj/">Mark
        Jones</a> has been helping me understand Haskell type
        classes and how to use them well in RBMH.</li>
    <li><a href="http://www.dcs.gla.ac.uk/~wadler/">Philip Wadler</a>
        had provided interesting and insightful feedback on the
        semantics of behaviors and events.</li>
</ul>

<h3>Contact</h3>

<blockquote>
    <p><a
    href="http://www.research.microsoft.com/research/graphics/elliott/">Conal
    Elliott</a> <br>
    Graphics Research Group <br>
    Microsoft Research <br>
    <a href="mailto:conal@microsoft.com">conal@microsoft.com</a> </p>
</blockquote>
</body>
</html>
